6984 kB
CREATE EXTENSION pointcloud;
7064 kB
CREATE EXTENSION postgis;
13 MB
CREATE EXTENSION pointcloud_postgis;
13MB
VACUUM FULL;
11MB

HUML6510C8920.las 79MB
time pdal pipeline --input humaita.las.to.pc.json

real    0m47.405s
user    0m27.516s
sys     0m0.592s

\l+
51MB
VACUUM FULL;
51MB

select PC_Summary(pa) from "UML6510C8920";
1) 16327 ms
2) 15686 ms
3) 16221 ms
4) 16289 ms
5) 15487 ms

select PC_Summary(PC_Union(pa)) from "UML6510C8920";
1) 22105 ms
2) 22306 ms
3) 22349 ms
4) 22140 ms
5) 22134 ms


pdal info HUML6510C8920.las
{
   "average": 79315.36829,
   "count": 2933330,
   "maximum": 80456.3638,
   "minimum": 78450.7408,
   "name": "GpsTime",
   "position": 12
}
real    0m13.796s
user    0m13.736s
sys     0m0.056s

pc_patch_stats_deserialize(const PCSCHEMA *schema, const uint8_t *buf)


/usr/lib/postgresql/9.5/lib/pointcloud-1.1.so
/home/vitor/cap-349-pgpointcloud/src/pointcloud/pointcloud-build/pgsql/pointcloud-1.1.so

create or replace function PC_Summary2(pcpatch)
returns text as
'/home/vitor/cap-349-pgpointcloud/src/pointcloud/pointcloud-build/pgsql/pointcloud-1.1', 'PC_Summary2'
language c immutable strict;

/home/vitor/cap-349-pgpointcloud/src/pointcloud/pointcloud-build/pgsql/pointcloud--1.1.0.sql
pcpatch_get_stat

CREATE OR REPLACE FUNCTION PC_Summary2(p pcpatch)
    RETURNS text AS '/home/vitor/cap-349-pgpointcloud/src/pointcloud/pointcloud-build/pgsql/pointcloud-1.1', 'pcpatch_summary'
    LANGUAGE 'c' IMMUTABLE STRICT;
pointcloud_agg_transfn

 lib/CMakeFiles/libpc-static.dir/build.make lib/CMakeFiles/libpc-static.dir/pc_stats.c.o




    CREATE OR REPLACE FUNCTION _PC_PatchStat2(p pcpatch, statno int)
            RETURNS pcpoint AS '/home/vitor/cap-349-pgpointcloud/src/pointcloud/pointcloud-build/pgsql/pointcloud-1.1', 'pcpatch_get_stat'
        LANGUAGE 'c' IMMUTABLE STRICT;



SELECT PC_NumPoints(PC_Union(pa)) FROM "UML6510C8920";



pointcloud/lib/pc_stats.c
Parallel

CREATE OR REPLACE FUNCTION pcpatch_agg_final_pcpatch2 (pointcloud_abs)
        RETURNS pcpatch AS '/home/vitor/cap-349-pgpointcloud/src/pointcloud/pointcloud-build/pgsql/pointcloud-1.1', 'pcpatch_agg_final_pcpatch'
        LANGUAGE 'c';

CREATE OR REPLACE FUNCTION pcpatch_agg_transfn2 (pointcloud_abs, pcpatch)
        RETURNS pointcloud_abs AS '/home/vitor/cap-349-pgpointcloud/src/pointcloud/pointcloud-build/pgsql/pointcloud-1.1', 'pointcloud_agg_transfn'
        LANGUAGE 'c';

CREATE AGGREGATE PC_Union2 (
       BASETYPE = pcpatch,
       SFUNC = pcpatch_agg_transfn2,
       STYPE = pointcloud_abs,
       FINALFUNC = pcpatch_agg_final_pcpatch2
);
